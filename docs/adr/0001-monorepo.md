# ADR 0001: モノレポ採用

## 決定
- 本プロジェクトはモノレポ（1つのリポに複数アプリ/共有パッケージ）で運用する。
- 対象: `apps/web`（Next.js）と`apps/api`（NestJS）、将来の`packages/*`（共通型/ユーティリティ）。

## 背景
- WebとAPIが密接に連携し、データモデル/型・CI・リリースの一貫性が重要。
- 変更の原子性（API変更とWeb対応を同一PRで）を確保したい。

## モノレポとは
- 1つのリポジトリに複数アプリやライブラリをまとめて管理する方式。
- 逆がポリレポ（アプリごとに別リポ）。

## 利点
- 共有コード/型の再利用（重複削減）
- 変更の原子性（壊れないリリース）
- 単一CI/CDでの整合性チェック
- 開発者体験（1回のセットアップで全体が動く）

## トレードオフ
- ツール（タスクランナー/キャッシュ）のセットアップが必要
- リポが大きくなると履歴やレビューが重くなる可能性

## 実装
- Turborepoを採用（`turbo.json`）。
- ルートに`package.json`を置き、`apps/*`と`packages/*`をワークスペースに指定。
- 当面は`apps/web`と`apps/api`のみ。将来`packages/shared`に型や共通ユーティリティを切り出す。

## 代替案
- ポリレポ（web, apiを別リポ）：初期は軽いが、型/契約の同期コストや同時変更の運用負担が増える。

## ステータス
- 承認（2025-09-20）。運用を開始し、課題が出れば見直し。
